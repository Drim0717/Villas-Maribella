<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Admin - Villas Maribella</title>
    <!-- Bootstrap 5 CSS -->
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <!-- Bootstrap Icons -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css">
    <link rel="stylesheet" href="admin.css">
</head>

<body>
    <!-- LOGIN SCREEN -->
    <div id="loginScreen" class="login-screen">
        <div class="login-box">
            <h1><img src="../images/Logo.png" alt="Villas Maribella" class="logo-image"></h1>
            <h2>Panel de Administración</h2>
            <form id="loginForm">
                <div class="form-group">
                    <label for="adminPassword">Contraseña:</label>
                    <input type="password" id="adminPassword" placeholder="Ingresa la contraseña" required>
                </div>
                <button type="submit" class="login-btn">Iniciar Sesión</button>
            </form>
        </div>
    </div>

    <!-- CONTENIDO PRINCIPAL (DASHBOARD) -->
    <div class="container-fluid py-4" id="adminDashboard" style="display: none;">

        <!-- HEADER -->
        <header class="d-flex justify-content-between align-items-center mb-4 pb-3 border-bottom">
            <h1 class="h3 fw-bold text-dark">Panel de Administración</h1>
            <button id="logoutBtn" class="btn btn-outline-danger btn-sm">
                <i class="bi bi-box-arrow-right me-1"></i> Cerrar Sesión
            </button>
        </header>

        <input type="date" id="blockStartDate" required>
    </div>
    <div class="form-group">
        <label for="blockEndDate">Fecha Fin:</label>
        <input type="date" id="blockEndDate" required>
    </div>
    </div>
    <div class="form-group">
        <label for="blockReason">Motivo:</label>
        <input type="text" id="blockReason" placeholder="Ej: Mantenimiento, Evento privado" required>
    </div>
    <button type="submit" class="block-btn">Bloquear Fechas</button>
    </form>
    </div>
    <div class="blocked-dates-list">
        <h3>Fechas Bloqueadas Actualmente</h3>
        <div id="blockedDatesList">
            <!-- Populated by JavaScript -->
        </div>
    </div>
    </div>
    </section>
    </div>

    <!-- EDIT MODAL -->
    <div id="editModal" class="modal">
        <div class="modal-dialog">
            <div class="modal-content">
                <h3>Editar Reserva</h3>
                <form id="editForm">
                    <input type="hidden" id="editReservationId">
                    <div class="form-group">
                        <label>Nombre del Huésped:</label>
                        <input type="text" id="editGuestName" required>
                    </div>
                    <div class="form-group">
                        <label>Email:</label>
                        <input type="email" id="editGuestEmail" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label>Check-in:</label>
                            <input type="date" id="editCheckIn" required>
                        </div>
                        <div class="form-group">
                            <label>Check-out:</label>
                            <input type="date" id="editCheckOut" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label>Número de Personas:</label>
                        <input type="number" id="editNumGuests" min="1" max="4" required>
                    </div>
                    <div class="form-group">
                        <label>Estado de la Reserva:</label>
                        <select id="editStatus" class="status-select" required>
                            <option value="confirmed">Confirmada</option>
                            <option value="pending">Pendiente</option>
                            <option value="cancelled">Cancelada</option>
                        </select>
                    </div>
                    <div class="modal-actions">
                        <button type="submit" class="save-btn">Guardar Cambios</button>
                        <button type="button" onclick="closeEditModal()" class="cancel-btn">Cancelar</button>
                    </div>
                </form>
            </div>
        </div>
    </div>

    <!-- File protocol detection and warning -->
    <script>
        // Detect if page is opened via file:// protocol
        if (window.location.protocol === 'file:') {
            // Create warning banner
            const warningBanner = document.createElement('div');
            warningBanner.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                right: 0;
                background: linear-gradient(135deg, #ff6b6b, #ee5a6f);
                color: white;
                padding: 15px 20px;
                text-align: center;
                font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                font-size: 14px;
                font-weight: 600;
                box-shadow: 0 2px 10px rgba(0,0,0,0.2);
                z-index: 10000;
                animation: slideDown 0.3s ease-out;
            `;
            warningBanner.innerHTML = `
                ⚠️ <strong>ADVERTENCIA:</strong> Esta página debe abrirse con un servidor local (como Live Server en VS Code) para que funcione correctamente. 
                Los módulos JavaScript están bloqueados por seguridad cuando se abre directamente desde archivos.
            `;
            document.body.insertBefore(warningBanner, document.body.firstChild);
        }
    </script>

    <script type="module" src="admin.js"></script>
</body>

</html>